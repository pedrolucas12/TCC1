# Bases de Dados

> Guia completo das fontes de dados epidemiol√≥gicos e clim√°ticos para o projeto de previs√£o de surtos de dengue.

---

## üìä Vis√£o Geral

O projeto utiliza duas categorias principais de dados:

1. **Dados Epidemiol√≥gicos**: Casos de dengue (SINAN/DataSUS)
2. **Dados Clim√°ticos**: Temperatura, precipita√ß√£o, umidade (INMET, CHIRPS, ERA5, NASA)
3. **Dados Auxiliares**: Popula√ß√£o, malhas municipais, √≠ndices socioecon√¥micos (IBGE)

---

## üè• DADOS EPIDEMIOL√ìGICOS

### 1. OpenDataSUS / SINAN - Dengue

#### Descri√ß√£o
- **Fonte**: Minist√©rio da Sa√∫de do Brasil
- **Sistema**: SINAN (Sistema de Informa√ß√£o de Agravos de Notifica√ß√£o)
- **Cobertura**: Nacional, todos os munic√≠pios brasileiros
- **Per√≠odo**: 2007 at√© o presente
- **Granularidade**: Microdados individuais de notifica√ß√µes

#### Links Oficiais
- **Cat√°logo**: [OpenDataSUS - Arboviroses Dengue](https://opendatasus.saude.gov.br/gl/dataset/arboviroses-dengue)
- **S3 (downloads diretos)**: `https://s3.sa-east-1.amazonaws.com/ckan.saude.gov.br/SINAN/Dengue/json/`
- **Dicion√°rio de Dados** (PDF): [dic_dados_dengue.pdf](https://s3.sa-east-1.amazonaws.com/ckan.saude.gov.br/SINAN/Dengue/dic_dados_dengue.pdf)

#### Formato dos Dados
- **Formatos dispon√≠veis**: JSON, CSV, DBF
- **Arquivos por ano**: Ex.: `DENGBR25.json.zip` (2025), `DENGBR24.json.zip` (2024)
- **Tamanho**: ~100MB a 500MB por ano (compactado)

#### Campos Principais

| Campo | Descri√ß√£o | Tipo | Uso |
|-------|-----------|------|-----|
| `dt_notific` | Data da notifica√ß√£o | Date | An√°lise temporal |
| `dt_sin_pri` | Data dos primeiros sintomas | Date | **Principal para s√©ries temporais** |
| `sem_pri` | Semana epidemiol√≥gica dos sintomas | String (YYYYWW) | Agrega√ß√£o temporal |
| `sem_not` | Semana epidemiol√≥gica da notifica√ß√£o | String (YYYYWW) | Atraso de notifica√ß√£o |
| `nu_ano` | Ano da notifica√ß√£o | Integer | Filtro temporal |
| `id_municip` | C√≥digo IBGE do munic√≠pio (resid√™ncia) | String (7 d√≠gitos) | **Chave espacial** |
| `id_mn_resi` | C√≥digo munic√≠pio resid√™ncia | String | Join espacial |
| `classificacao_final` | Classifica√ß√£o do caso | String | Filtro de casos |
| `criterio_confirmacao` | Como o caso foi confirmado | String | Qualidade do dado |
| `evolucao` | Evolu√ß√£o do caso | String | An√°lise de gravidade |
| `idade` | Idade do paciente | Integer | Estratifica√ß√£o |
| `sexo` | Sexo | String (M/F) | Estratifica√ß√£o |

#### Valores Importantes para Filtros

**`criterio_confirmacao`**:
- `LABORATORIAL`: Confirmado por exame
- `CL√çNICO-EPIDEMIOL√ìGICO`: Confirmado por crit√©rio cl√≠nico
- `EM INVESTIGA√á√ÉO`: Ainda em investiga√ß√£o
- `DESCARTADO`: N√£o √© dengue

**`classificacao_final`**:
- `DENGUE`: Caso confirmado
- `DENGUE COM SINAIS DE ALARME`: Caso grave
- `DENGUE GRAVE`: Caso muito grave
- `DESCARTADO`: N√£o confirmado

#### Exemplo de Download (Python)

```python
import requests, zipfile, io, json
import pandas as pd

def download_sinan_dengue(year):
    """
    Baixa dados SINAN de dengue do OpenDataSUS
    year: dois d√≠gitos (ex: 24 para 2024)
    """
    url = f"https://s3.sa-east-1.amazonaws.com/ckan.saude.gov.br/SINAN/Dengue/json/DENGBR{year}.json.zip"
    
    print(f"Baixando dados de 20{year}...")
    r = requests.get(url, timeout=120)
    
    z = zipfile.ZipFile(io.BytesIO(r.content))
    json_file = [n for n in z.namelist() if n.endswith(".json")][0]
    
    with z.open(json_file) as f:
        data = json.load(f)
    
    df = pd.json_normalize(data)
    print(f"Total de registros: {len(df)}")
    return df

# Uso
df_2024 = download_sinan_dengue(24)
```

#### Limita√ß√µes e Considera√ß√µes
- ‚ö†Ô∏è **Subnotifica√ß√£o**: Muitos casos assintom√°ticos ou leves n√£o s√£o notificados
- ‚ö†Ô∏è **Atraso de notifica√ß√£o**: Diferen√ßa entre `dt_sin_pri` e `dt_notific` (m√©dias de 7-14 dias)
- ‚ö†Ô∏è **Qualidade vari√°vel**: Alguns campos podem estar incompletos
- ‚úÖ **Cobertura ampla**: Praticamente todos os munic√≠pios brasileiros
- ‚úÖ **Hist√≥rico longo**: Dados desde 2007

---

### 2. TabNet / DATASUS (Dados Agregados)

#### Descri√ß√£o
- Interface web para consultar dados j√° agregados
- √ötil para valida√ß√£o r√°pida
- Menos flex√≠vel que microdados

#### Link
[TabNet - Dengue](https://tabnet.datasus.gov.br/cgi/tabcgi.exe?sinannet%2Fcnv%2Fdenguebbr.def)

---

### 3. InfoDengue (Fiocruz / FGV)

#### Descri√ß√£o
- Sistema de monitoramento e alerta de arboviroses
- API p√∫blica com dados processados
- √ötil para **benchmarking**

#### Caracter√≠sticas
- Dados semanais por munic√≠pio
- N√≠veis de alerta (verde, amarelo, laranja, vermelho)
- Incorpora dados clim√°ticos e tweets

#### API
- **Documenta√ß√£o**: [API InfoDengue](https://info.dengue.mat.br/services/api)
- **Endpoint exemplo**: `/api/alertcity?geocode=3304557&disease=dengue&format=json&ew_start=1&ew_end=52&ey_start=2020&ey_end=2024`

---

## üå¶Ô∏è DADOS CLIM√ÅTICOS

### 1. INMET / BDMEP (Instituto Nacional de Meteorologia)

#### Descri√ß√£o
- **Tipo**: Dados de esta√ß√µes meteorol√≥gicas terrestres
- **Cobertura**: ~500 esta√ß√µes autom√°ticas no Brasil
- **Qualidade**: Alta (medi√ß√µes diretas)
- **Granularidade**: Hor√°ria ou di√°ria

#### Vari√°veis Dispon√≠veis
- Temperatura (m√©dia, m√≠n, m√°x)
- Precipita√ß√£o acumulada
- Umidade relativa
- Press√£o atmosf√©rica
- Radia√ß√£o solar
- Velocidade/dire√ß√£o do vento

#### Links
- **BDMEP**: [https://bdmep.inmet.gov.br/](https://bdmep.inmet.gov.br/)
- **Portal INMET**: [https://portal.inmet.gov.br/](https://portal.inmet.gov.br/manual)

#### Limita√ß√µes
- ‚ùå **Distribui√ß√£o irregular**: Nem todos os munic√≠pios t√™m esta√ß√µes
- ‚ùå **Dados pontuais**: Representam apenas o local da esta√ß√£o
- ‚úÖ **Alta qualidade**: Medi√ß√µes precisas
- ‚úÖ **Longo hist√≥rico**: Muitas esta√ß√µes com d√©cadas de dados

#### Estrat√©gia de Uso
1. Baixar dados das esta√ß√µes
2. Mapear cada esta√ß√£o ao munic√≠pio mais pr√≥ximo
3. Ou usar interpola√ß√£o espacial

---

### 2. CHIRPS (Climate Hazards Group InfraRed Precipitation with Station data)

#### Descri√ß√£o
- **Tipo**: Precipita√ß√£o por sat√©lite + esta√ß√µes
- **Cobertura**: Global (50¬∞S a 50¬∞N)
- **Resolu√ß√£o espacial**: ~5.5 km (0.05¬∞)
- **Resolu√ß√£o temporal**: Di√°ria
- **Per√≠odo**: 1981 at√© o presente (atualiza√ß√£o cont√≠nua)

#### Vantagens
- ‚úÖ **Cobertura espacial completa**: Todos os munic√≠pios
- ‚úÖ **Resolu√ß√£o adequada**: Permite agrega√ß√£o por munic√≠pio
- ‚úÖ **Validado com esta√ß√µes**: Alta correla√ß√£o com INMET
- ‚úÖ **F√°cil processamento**: Formato NetCDF padr√£o

#### Links
- **Site oficial**: [https://www.chc.ucsb.edu/data/chirps](https://www.chc.ucsb.edu/data/chirps)
- **FTP**: ftp://ftp.chg.ucsb.edu/pub/org/chg/products/CHIRPS-2.0/

#### Formato
- NetCDF (.nc)
- GeoTIFF (.tif)

#### Exemplo de Uso (Python)

```python
import xarray as xr
import geopandas as gpd

# Abrir dados CHIRPS
ds = xr.open_dataset('chirps-v2.0.2024.days_p05.nc')

# Carregar shapefile de munic√≠pios
municipios = gpd.read_file('malha_municipal.shp')

# Calcular m√©dia de precipita√ß√£o por munic√≠pio
# (usa zonal statistics - rasterio/rasterstats)
```

#### Recomenda√ß√£o
‚≠ê **CHIRPS √© altamente recomendado** para precipita√ß√£o devido √† cobertura espacial completa.

---

### 3. ERA5 (Copernicus Climate Data Store)

#### Descri√ß√£o
- **Tipo**: Rean√°lise atmosf√©rica global
- **Fonte**: ECMWF (European Centre for Medium-Range Weather Forecasts)
- **Resolu√ß√£o espacial**: ~31 km (0.25¬∞ ou 0.1¬∞)
- **Resolu√ß√£o temporal**: Hor√°ria
- **Per√≠odo**: 1950 at√© o presente

#### Vari√°veis Dispon√≠veis (100+)
- Temperatura (2m, superf√≠cie)
- Precipita√ß√£o
- Umidade relativa/espec√≠fica
- Velocidade do vento
- Radia√ß√£o
- Press√£o
- E muito mais...

#### Links
- **Climate Data Store**: [https://cds.climate.copernicus.eu/](https://cds.climate.copernicus.eu/)
- **ERA5 single levels**: [Dataset](https://cds.climate.copernicus.eu/datasets/reanalysis-era5-single-levels)

#### Como Acessar
1. Criar conta gratuita no CDS
2. Instalar `cdsapi` (Python)
3. Fazer requisi√ß√µes via API

#### Exemplo (Python)

```python
import cdsapi

c = cdsapi.Client()

c.retrieve(
    'reanalysis-era5-single-levels',
    {
        'product_type': 'reanalysis',
        'variable': ['2m_temperature', 'total_precipitation'],
        'year': '2024',
        'month': '01',
        'day': '01',
        'time': '12:00',
        'area': [-10, -50, -25, -40],  # N, W, S, E (bounding box Brasil)
        'format': 'netcdf'
    },
    'download.nc')
```

#### Recomenda√ß√£o
‚≠ê **ERA5 √© excelente** para vari√°veis al√©m de precipita√ß√£o (temperatura, umidade, vento).

---

### 4. NASA POWER (Prediction Of Worldwide Energy Resources)

#### Descri√ß√£o
- **Tipo**: API para dados meteorol√≥gicos/solares
- **Cobertura**: Global
- **Resolu√ß√£o espacial**: ~0.5¬∞ x 0.625¬∞
- **Resolu√ß√£o temporal**: Di√°ria
- **Per√≠odo**: 1981 at√© ~7 dias atr√°s

#### Vantagens
- ‚úÖ **API simples**: Requisi√ß√£o HTTP por coordenada
- ‚úÖ **Sem necessidade de conta**: Acesso livre
- ‚úÖ **R√°pido para prot√≥tipos**: Ideal para testes iniciais
- ‚úÖ **M√∫ltiplas vari√°veis**: Temp, precip, umidade, radia√ß√£o

#### Vari√°veis √öteis
- `T2M`: Temperatura a 2m (¬∞C)
- `PRECTOTCORR`: Precipita√ß√£o total corrigida (mm/dia)
- `RH2M`: Umidade relativa a 2m (%)
- `WS2M`: Velocidade do vento a 2m (m/s)

#### Exemplo de Uso (Python)

```python
import requests
import pandas as pd

def get_nasa_power(lat, lon, start_date, end_date):
    """
    Baixa dados NASA POWER para uma coordenada
    """
    url = "https://power.larc.nasa.gov/api/temporal/daily/point"
    
    params = {
        "parameters": "T2M,PRECTOTCORR,RH2M",
        "community": "AG",
        "longitude": lon,
        "latitude": lat,
        "start": start_date,  # YYYYMMDD
        "end": end_date,
        "format": "JSON"
    }
    
    response = requests.get(url, params=params)
    data = response.json()
    
    # Converter para DataFrame
    df = pd.DataFrame(data['properties']['parameter'])
    df.index = pd.to_datetime(df.index, format='%Y%m%d')
    
    return df

# Exemplo: Bras√≠lia
df_clima = get_nasa_power(-15.8, -47.9, "20200101", "20241231")
```

#### Links
- **Homepage**: [https://power.larc.nasa.gov/](https://power.larc.nasa.gov/)
- **Documenta√ß√£o API**: [API Docs](https://power.larc.nasa.gov/docs/services/api/)

#### Recomenda√ß√£o
‚≠ê **NASA POWER √© ideal** para prototipagem r√°pida e valida√ß√£o de conceito.

---

## üó∫Ô∏è DADOS AUXILIARES

### 1. IBGE - Malhas Territoriais

#### Descri√ß√£o
- Shapefiles dos limites municipais brasileiros
- C√≥digos IBGE de 7 d√≠gitos (padr√£o nacional)
- Atualizados anualmente

#### Link
[Malhas Municipais - IBGE](https://www.ibge.gov.br/geociencias/organizacao-do-territorio/malhas-territoriais/15774-malhas.html)

#### Uso
- Mapear c√≥digos de munic√≠pio (SINAN) para geometrias
- Calcular centroids para consultas de clima
- Zonal statistics (m√©dia de grade clim√°tica dentro do munic√≠pio)

---

### 2. IBGE - Popula√ß√£o e Indicadores

#### Dados Dispon√≠veis
- Popula√ß√£o por munic√≠pio (Censo, estimativas anuais)
- PIB municipal
- √çndice de saneamento
- Taxa de urbaniza√ß√£o
- Densidade demogr√°fica

#### Uso
- Normaliza√ß√£o de casos (casos per capita)
- Vari√°veis de controle em modelos

---

## üìã RESUMO: QUAL FONTE USAR?

### Para Casos de Dengue
‚úÖ **Recomendado**: OpenDataSUS / SINAN (microdados)
- Download via S3
- Processar localmente
- Agregar por munic√≠pio + semana

### Para Precipita√ß√£o
‚úÖ **Recomendado**: CHIRPS
- Cobertura espacial completa
- Resolu√ß√£o adequada
- F√°cil agrega√ß√£o por munic√≠pio

üîÑ **Alternativa**: NASA POWER (prototipagem)
üîÑ **Complementar**: INMET (valida√ß√£o/compara√ß√£o)

### Para Temperatura e Umidade
‚úÖ **Recomendado**: ERA5 ou NASA POWER
- ERA5: Melhor resolu√ß√£o e qualidade
- NASA POWER: Mais simples de usar

üîÑ **Alternativa**: INMET (quando dispon√≠vel)

### Para Geometrias e Popula√ß√£o
‚úÖ **Recomendado**: IBGE
- Malhas municipais (shapefile)
- Estimativas populacionais

---

## üîó Pipeline de Integra√ß√£o

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SINAN (JSON)   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
                       ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ    ‚îÇ                  ‚îÇ
‚îÇ CHIRPS (NetCDF) ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ETL Pipeline    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ    ‚îÇ  (Python/SQL)    ‚îÇ
                       ‚îÇ    ‚îÇ                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  ERA5 (NetCDF)  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚î§             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ             ‚ñº
                       ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ    ‚îÇ  PostgreSQL +    ‚îÇ
‚îÇ IBGE (Shapefile)‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ  PostGIS         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îÇ
                                     ‚ñº
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ Features Semanais‚îÇ
                            ‚îÇ (munic√≠pio-semana)‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îÇ
                                     ‚ñº
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ   Modelagem ML   ‚îÇ
                            ‚îÇ (SARIMA/XGB/LSTM)‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìù Checklist de Coleta

- [ ] Baixar SINAN dengue (2015-2024)
- [ ] Baixar CHIRPS (2015-2024) para regi√µes de interesse
- [ ] Registrar conta no Copernicus CDS
- [ ] Testar API NASA POWER
- [ ] Baixar malha municipal IBGE (ano mais recente)
- [ ] Baixar estimativas populacionais IBGE
- [ ] Documentar vers√µes e datas de download

---

*√öltima atualiza√ß√£o: Outubro 2025*

